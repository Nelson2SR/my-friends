{"version":3,"sources":["uni-app:///main.js","webpack:////Users/surong/Project/HBuilderProject/MyFriends/pages/profile/profile.vue?a7eb","webpack:////Users/surong/Project/HBuilderProject/MyFriends/pages/profile/profile.vue?5433","webpack:////Users/surong/Project/HBuilderProject/MyFriends/pages/profile/profile.vue?6374","webpack:////Users/surong/Project/HBuilderProject/MyFriends/pages/profile/profile.vue?7243","uni-app:///pages/profile/profile.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,kG;AACAA,UAAU,CAACC,gBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;;;AAGtD;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAq0B,CAAgB,qyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACyFz1B,gD;;;;;;;;AAQA;AACA,MADA,kBACA;AACA;AACA;AACA,wEADA,CADA;;AAIA,kBAJA;AAKA,kBALA;AAMA,uBANA;;;AASA,GAXA;AAYA;AACA,sBADA,EAZA;;AAeA,yGAfA;AAgBA;AACA,kCADA;AAEA,gBAFA,0BAEA;AACA;AACA;AACA;AACA;AACA,eADA,mBACA,GADA,EACA;AACA;AACA;AACA;AACA,iCADA;AAEA;AACA,8BADA;AAEA,2CAFA;AAGA,6DAHA,EAFA;;AAOA,gBAPA,CAOA;AACA;AACA;AACA;AACA,iDADA;AAEA,gCAFA;;;AAKA;AACA;;AAEA;AACA;AACA,kCADA;AAEA,uBAFA,mBAEA,OAFA,EAEA;AACA;AACA;AACA;AACA,iBANA;AAOA,oBAPA,kBAOA;AACA;AACA,gCADA;AAEA,sCAFA;AAGA,iCAHA;;AAKA,iBAbA;;AAeA,aAlCA;;;AAqCA,WAtCA,MAsCA;AACA;AACA;AACA,SA5CA;;AA8CA,KApDA;AAqDA,UArDA,kBAqDA,QArDA,EAqDA;AACA;AACA;;;;AAIA;AACA;AACA,wCADA;;AAGA,OAJA,MAIA;AACA;AACA,uCADA;;AAGA;AACA,KApEA;AAqEA,WArEA,mBAqEA,MArEA,EAqEA;AACA;AACA;AACA;AACA,kCADA;AAEA;AACA,wBADA,EAFA;;AAKA,UALA,CAKA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SALA,MAKA;AACA;AACA;AACA;AACA,OAjBA;AAkBA,KA1FA;AA2FA,cA3FA,sBA2FA,MA3FA,EA2FA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BADA;AAEA,kBAFA;AAGA,UAHA,CAGA;AACA;AACA;AACA,OANA;AAOA,KAzGA,GAhBA;;AA2HA,QA3HA,oBA2HA;AACA;;AAEA;AACA;AACA;AACA,mCADA;AAEA;AACA,6BADA,EAFA;;;AAMA,UANA,CAMA;AACA;AACA;AACA,OATA;AAUA;AACA;AACA,0CADA;AAEA;AACA,6BADA,EAFA;;;AAMA,UANA,CAMA;AACA;AACA;AACA,OATA,EASA,KATA,CASA;AACA;AACA,OAXA;;AAaA;AACA,GAzJA,E","file":"pages/profile/profile.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/profile/profile.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./profile.vue?vue&type=template&id=60cb334c&\"\nvar renderjs\nimport script from \"./profile.vue?vue&type=script&lang=js&\"\nexport * from \"./profile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/profile/profile.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./profile.vue?vue&type=template&id=60cb334c&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./profile.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<cu-custom bgColor=\"bg-white\" :isBack=\"false\">\r\n\t\t\t<block slot=\"content\">我的</block>\r\n\t\t</cu-custom>\r\n\r\n\t\t<!-- login module -->\r\n\t\t<view class=\"bg-img bg-mask flex align-center\" style=\"background-image: url('https://ossweb-img.qq.com/images/lol/web201310/skin/big10006.jpg');height: 414upx;\">\r\n\t\t\t<view class=\"flex padding text-white\" v-if=\"hasLogin\">\r\n\t\t\t\t<view class=\"padding-lg margin-xs radius\">\r\n\t\t\t\t\t<view class=\"cu-avatar round lg margin-left\" :style=\"{backgroundImage:'url(' + avatarUrl + ')'}\">\r\n\t\t\t\t\t\t<view class=\"cu-tag badge\" :class=\"gender%2==0?'cuIcon-female bg-pink':'cuIcon-male bg-blue'\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"padding-sm margin-xs radius text-lg\">\r\n\t\t\t\t\t<text :value=\"userName\">{{userName}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"flex padding text-white\" v-else>\r\n\t\t\t\t<view class=\"padding-lg margin-xs radius\">\r\n\t\t\t\t\t<view class=\"cu-avatar round lg margin-left\" v-for=\"(item,index) in avatar\" :key=\"index\" :style=\"[{ backgroundImage:'url(' + avatar[index] + ')' }]\">\r\n\t\t\t\t\t\t<view class=\"cu-tag badge\" :class=\"index%2==0?'cuIcon-female bg-pink':'cuIcon-male bg-blue'\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"padding-sm margin-xs radius text-lg\">\r\n\t\t\t\t\t请登陆/注册你的账号\r\n\t\t\t\t\t<button type=\"default\" v-on:click=\"login_weixin\">点击登陆</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\n\t\t\n\t\t<!-- my interest -->\n\t\t<view class=\"cu-bar bg-white margin-top\">\n\t\t\t<view class=\"action\">\n\t\t\t\t<text class=\"cuIcon-title text-pink\"></text> 我的爱好\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- <view class=\"action text-gray add-action\">\n\t\t\t<button class=\"cu-btn cuIcon-add bg-gradual-blue shadow text-center\" @click=\"createInterest\"></button>\n\t\t</view> -->\n\t\t<view class=\"padding flex flex-direction\">\n\t\t\t<button class=\"cu-btn cuIcon-add bg-gradual-blue margin-tb-sm lg\" @click=\"createInterest\"></button>\n\t\t</view>\n\t\t\n\t\t<view class=\"solids-bottom padding-xs flex align-center\" >\n\t\t\t<view class=\"flex-sub text-center\">\n\t\t\t\t<view class=\"solid-bottom text-df padding\">你还添加任何爱好</view>\n\t\t\t</view>\n\t\t</view>\r\n\r\n\t\t<!-- my groups module -->\r\n\t\t<!-- #ifndef MP-ALIPAY -->\r\n\t\t<view class=\"cu-bar bg-white margin-top\">\r\n\t\t\t<view class=\"action\">\r\n\t\t\t\t<text class=\"cuIcon-title text-pink\"></text> 我的群组\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<cu-swiper :swiperList=\"myGroups\" v-if=\"myGroups.length > 0\"></cu-swiper>\r\n\t\t<view class=\"solids-bottom padding-xs flex align-center\" v-else>\r\n\t\t\t<view class=\"flex-sub text-center\">\r\n\t\t\t\t<view class=\"solid-bottom text-df padding\">你还没创建任何群组</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- #endif -->\r\n\r\n\t\t<!-- my joined groups module -->\r\n\t\t<!-- #ifndef MP-ALIPAY -->\r\n\t\t<view class=\"cu-bar bg-white margin-top\">\r\n\t\t\t<view class=\"action\">\r\n\t\t\t\t<text class=\"cuIcon-title text-pink\"></text> 其他群组\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<cu-swiper :swiperList=\"myOtherGroups\" v-if=\"myOtherGroups.length > 0\"></cu-swiper>\r\n\t\t<view class=\"solids-bottom padding-xs flex align-center\" v-else>\r\n\t\t\t<view class=\"flex-sub text-center\">\r\n\t\t\t\t<view class=\"solid-bottom text-df padding\">你还没加入任何群组</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- #endif -->\r\n\r\n\t\t<cu-bar></cu-bar>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapMutations,\r\n\t\tmapActions\r\n\t} from 'vuex'\r\n\r\n\timport cuSwiper from '../../colorui/components/cu-swiper.vue'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tavatar: [\r\n\t\t\t\t\t'https://ossweb-img.qq.com/images/lol/web201310/skin/big10001.jpg'\r\n\t\t\t\t],\r\n\t\t\t\tprovider: '',\r\n\t\t\t\tmyGroups: [],\r\n\t\t\t\tmyOtherGroups: []\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tcuSwiper\r\n\t\t},\r\n\t\tcomputed: mapState(['forcedLogin', 'hasLogin', 'userName', 'avatarUrl', 'gender', 'openId']),\r\n\t\tmethods: {\r\n\t\t\t...mapActions(['login']),\r\n\t\t\tlogin_weixin() {\r\n\t\t\t\t//微信登录\r\n\t\t\t\tconsole.log('login as wechat')\r\n\t\t\t\tlet self = this;\r\n\t\t\t\twx.login({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log('login response: %s', JSON.stringify(res))\r\n\t\t\t\t\t\tif (res.code) { //发起网络请求 \r\n\t\t\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\t\t\tname: 'oauth-login',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\tcode: res.code,\r\n\t\t\t\t\t\t\t\t\tappId: 'wx95bd5dc2182e3ad4',\r\n\t\t\t\t\t\t\t\t\tappSecret: 'f51b12f21d601c68fb1fbc3bb1aea1ac'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\tconsole.log('OAuth Response: %s', JSON.stringify(res))\r\n\t\t\t\t\t\t\t\tconst openId = res.result.openId\r\n\t\t\t\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\t\t\t\t\"sessionId\": res.result.sessionId,\r\n\t\t\t\t\t\t\t\t\t\"openId\": openId\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t// creat user if user not exist\r\n\t\t\t\t\t\t\t\tconst user = self.getUser(openId);\r\n\r\n\t\t\t\t\t\t\t\t// get user info from weixin\r\n\t\t\t\t\t\t\t\tuni.getUserInfo({\r\n\t\t\t\t\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\t\t\t\t\tsuccess(infoRes) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('User Info: %s', JSON.stringify(infoRes));\r\n\t\t\t\t\t\t\t\t\t\tinfoRes.userInfo.openId = openId\r\n\t\t\t\t\t\t\t\t\t\tself.toMain(infoRes.userInfo);\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\tposition: 'bottom',\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: '登陆失败'\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log('登录失败！' + res.errMsg)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttoMain(userInfo) {\r\n\t\t\t\tthis.login(userInfo);\r\n\t\t\t\t/**\r\n\t\t\t\t * 强制登录时使用reLaunch方式跳转过来\r\n\t\t\t\t * 返回首页也使用reLaunch方式\r\n\t\t\t\t */\r\n\t\t\t\tif (this.forcedLogin) {\r\n\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\turl: '/pages/tabBar/home/home',\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\turl: '/pages/profile/profile'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetUser(openId) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tconsole.log('Check if user registered with openId %s', openId);\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: \"user-get-by-openId\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\topenId: openId\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tconsole.log('get user successfully: %s', JSON.stringify(res))\r\n\r\n\t\t\t\t\tif (res.result.data.length === 0) {\r\n\t\t\t\t\t\tconsole.log('User not found')\r\n\t\t\t\t\t\tconst user = self.createUser(openId)\r\n\r\n\t\t\t\t\t\treturn user;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log('User is retrieved: %s', JSON.stringify(res.result.data[0]))\r\n\t\t\t\t\t\treturn res.result.data[0]\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcreateUser(openId) {\r\n\t\t\t\tlet user = {};\r\n\t\t\t\tuser.name = this.userName;\r\n\t\t\t\tuser.provider = this.provider;\r\n\t\t\t\tuser.gender = this.gender;\r\n\t\t\t\tuser.open_id = openId;\r\n\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: \"user-create\",\r\n\t\t\t\t\tdata: user\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tconsole.log('create user successully: %s', JSON.stringify(res))\r\n\t\t\t\t\treturn res.result.id\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tconsole.log('Page onLoad' + this.openId);\r\n\r\n\t\t\tif (this.openId !== '') {\r\n\t\t\t\t//get my created groups\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\tname: 'group-get-by-openId',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\topenId: this.openId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconsole.log('My Groups: %s', JSON.stringify(res))\r\n\t\t\t\t\t\tthis.myGroups = res.result.data;\r\n\t\t\t\t\t});\n\t\t\t\t// get my other groups\n\t\t\t\tuniCloud.callFunction({\n\t\t\t\t\t\tname: 'group-get-by-member-openId',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\topenId: this.openId\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tconsole.log('My Other Groups: %s', JSON.stringify(res))\n\t\t\t\t\t\tthis.myOtherGroups = res.result.data;\n\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\tconsole.error('Error retriving my other group: %s', JSON.stringify(err))\n\t\t\t\t\t});\t\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n"],"sourceRoot":""}