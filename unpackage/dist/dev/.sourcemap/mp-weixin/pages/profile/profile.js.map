{"version":3,"sources":["webpack:////Users/surong/Project/HBuilderProject/MyFriends/main.js","webpack:////Users/surong/Project/HBuilderProject/MyFriends/pages/profile/profile.vue?a7eb","webpack:////Users/surong/Project/HBuilderProject/MyFriends/pages/profile/profile.vue?bbe9","webpack:////Users/surong/Project/HBuilderProject/MyFriends/pages/profile/profile.vue?2951","webpack:////Users/surong/Project/HBuilderProject/MyFriends/pages/profile/profile.vue?7243","webpack:////Users/surong/Project/HBuilderProject/MyFriends/pages/profile/profile.vue"],"names":["createPage","Page","data","avatar","provider","myGroups","myOtherGroups","components","cuSwiper","computed","methods","login_weixin","console","log","self","wx","login","success","res","JSON","stringify","code","uniCloud","callFunction","name","appId","appSecret","then","openId","result","uni","setStorage","sessionId","user","getUser","getUserInfo","infoRes","userInfo","toMain","fail","showToast","icon","position","title","errMsg","forcedLogin","reLaunch","url","redirectTo","length","createUser","userName","gender","open_id","id","onLoad","catch","err","error"],"mappings":"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","file":"pages/profile/profile.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/profile/profile.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./profile.vue?vue&type=template&id=f9149e1e&\"\nvar renderjs\nimport script from \"./profile.vue?vue&type=script&lang=js&\"\nexport * from \"./profile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/surong/Project/HBuilderProject/MyFriends/pages/profile/profile.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./profile.vue?vue&type=template&id=f9149e1e&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./profile.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tmapState,\n\tmapMutations,\n\tmapActions\n} from 'vuex'\n\nimport cuSwiper from '../../colorui/components/cu-swiper.vue'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tavatar: [\n\t\t\t\t'https://ossweb-img.qq.com/images/lol/web201310/skin/big10001.jpg'\n\t\t\t],\n\t\t\tprovider: '',\n\t\t\tmyGroups: [],\n\t\t\tmyOtherGroups: []\n\n\t\t}\n\t},\n\tcomponents: {\n\t\tcuSwiper\n\t},\n\tcomputed: mapState(['forcedLogin', 'hasLogin', 'userName', 'avatarUrl', 'gender', 'openId']),\n\tmethods: {\n\t\t...mapActions(['login']),\n\t\tlogin_weixin() {\n\t\t\t//微信登录\n\t\t\tconsole.log('login as wechat')\n\t\t\tlet self = this;\n\t\t\twx.login({\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tconsole.log('login response: %s', JSON.stringify(res))\n\t\t\t\t\tif (res.code) { //发起网络请求 \n\t\t\t\t\t\tuniCloud.callFunction({\n\t\t\t\t\t\t\tname: 'oauth-login',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tcode: res.code,\n\t\t\t\t\t\t\t\tappId: 'wx95bd5dc2182e3ad4',\n\t\t\t\t\t\t\t\tappSecret: 'f51b12f21d601c68fb1fbc3bb1aea1ac'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\t\tconsole.log('OAuth Response: %s', JSON.stringify(res))\n\t\t\t\t\t\t\tconst openId = res.result.openId\n\t\t\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\t\t\t\"sessionId\": res.result.sessionId,\n\t\t\t\t\t\t\t\t\"openId\": openId\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t// creat user if user not exist\n\t\t\t\t\t\t\tconst user = self.getUser(openId);\n\n\t\t\t\t\t\t\t// get user info from weixin\n\t\t\t\t\t\t\tuni.getUserInfo({\n\t\t\t\t\t\t\t\tprovider: 'weixin',\n\t\t\t\t\t\t\t\tsuccess(infoRes) {\n\t\t\t\t\t\t\t\t\tconsole.log('User Info: %s', JSON.stringify(infoRes));\n\t\t\t\t\t\t\t\t\tinfoRes.userInfo.openId = openId\n\t\t\t\t\t\t\t\t\tself.toMain(infoRes.userInfo);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfail() {\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\t\tposition: 'bottom',\n\t\t\t\t\t\t\t\t\t\ttitle: '登陆失败'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('登录失败！' + res.errMsg)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\ttoMain(userInfo) {\n\t\t\tthis.login(userInfo);\n\t\t\t/**\n\t\t\t * 强制登录时使用reLaunch方式跳转过来\n\t\t\t * 返回首页也使用reLaunch方式\n\t\t\t */\n\t\t\tif (this.forcedLogin) {\n\t\t\t\tuni.reLaunch({\n\t\t\t\t\turl: '/pages/tabBar/home/home',\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tuni.redirectTo({\n\t\t\t\t\turl: '/pages/profile/profile'\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tgetUser(openId) {\n\t\t\tlet self = this;\n\t\t\tconsole.log('Check if user registered with openId %s', openId);\n\t\t\tuniCloud.callFunction({\n\t\t\t\tname: \"user-get-by-openId\",\n\t\t\t\tdata: {\n\t\t\t\t\topenId: openId\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tconsole.log('get user successfully: %s', JSON.stringify(res))\n\n\t\t\t\tif (res.result.data.length === 0) {\n\t\t\t\t\tconsole.log('User not found')\n\t\t\t\t\tconst user = self.createUser(openId)\n\n\t\t\t\t\treturn user;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('User is retrieved: %s', JSON.stringify(res.result.data[0]))\n\t\t\t\t\treturn res.result.data[0]\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tcreateUser(openId) {\n\t\t\tlet user = {};\n\t\t\tuser.name = this.userName;\n\t\t\tuser.provider = this.provider;\n\t\t\tuser.gender = this.gender;\n\t\t\tuser.open_id = openId;\n\n\t\t\tuniCloud.callFunction({\n\t\t\t\tname: \"user-create\",\n\t\t\t\tdata: user\n\t\t\t}).then(res => {\n\t\t\t\tconsole.log('create user successully: %s', JSON.stringify(res))\n\t\t\t\treturn res.result.id\n\t\t\t})\n\t\t}\n\t},\n\tonLoad() {\n\t\tconsole.log('Page onLoad' + this.openId);\n\n\t\tif (this.openId !== '') {\n\t\t\t//get my created groups\n\t\t\tuniCloud.callFunction({\n\t\t\t\t\tname: 'group-get-by-openId',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\topenId: this.openId\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tconsole.log('My Groups: %s', JSON.stringify(res))\n\t\t\t\t\tthis.myGroups = res.result.data;\n\t\t\t\t});\n\t\t\t// get my other groups\n\t\t\tuniCloud.callFunction({\n\t\t\t\t\tname: 'group-get-by-member-openId',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\topenId: this.openId\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tconsole.log('My Other Groups: %s', JSON.stringify(res))\n\t\t\t\t\tthis.myOtherGroups = res.result.data;\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tconsole.error('Error retriving my other group: %s', JSON.stringify(err))\n\t\t\t\t});\t\n\n\t\t}\n\t}\n}\n"],"sourceRoot":""}